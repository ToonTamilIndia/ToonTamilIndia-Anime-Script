const searchapi="https://techzapi2.vercel.app/anime/gogoanime/";async function getJson(e){try{let a=await axios.get(e);return a.data}catch(t){console.error(t)}}async function RefreshLazyLoader(){let e=new IntersectionObserver((e,a)=>{e.forEach(e=>{if(e.isIntersecting){let a=e.target;a.src=a.dataset.src}})}),a=document.querySelectorAll("img.lzy_img");a.forEach(a=>{e.observe(a)})}function sentenceCase(e){return null!==e&&""!==e&&(e=e.toString()).replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}let hasNextPage=!0;async function SearchAnime(e,a=1){let t=await getJson("https://techzapi2.vercel.app/anime/gogoanime/"+e+"?page="+a),s=t.results,n=document.getElementById("latest2"),r=document.getElementById("load"),i="";for(let l=0;l<s.length;l++){let c=s[l];i+=`<a href="./anime.html?anime=${c.id}"><div class="poster la-anime"> <div id="shadow1" class="shadow"> <div class="dubb">${c.subOrDub.toUpperCase()}</div></div><div id="shadow2" class="shadow"> <img class="lzy_img" src="./logo/loading2.gif" data-src="${c.image}"> </div><div class="la-details"> <h3>${sentenceCase(c.title)}</h3> <div id="extra"> <span>${c.releaseDate}</span> </div></div></div></a>`}return n.innerHTML+=i,r.style.display="none",n.style.display="block",t.hasNextPage}const params=new URLSearchParams(window.location.search),query=params.get("query");let page=1;null==query&&window.location.replace("./index.html"),document.getElementById("latest").innerHTML=`Search Results: ${query}`,SearchAnime(query,page).then(e=>{hasNextPage=e,page+=1,RefreshLazyLoader(),console.log("Search animes loaded")}),window.addEventListener("scroll",()=>{window.scrollY+window.innerHeight>=document.documentElement.scrollHeight&&!0==hasNextPage&&SearchAnime(query,page).then(e=>{hasNextPage=e,page+=1,RefreshLazyLoader(),console.log("Search animes loaded")})});