const infoapi="https://techzapi2.vercel.app/anime/gogoanime/info/",epapi="https://api.techzbots1.workers.dev/gogo/episodes/",searchapi="https://techzapi2.vercel.app/meta/anilist/",anilistinfoapi="https://techzapi2.vercel.app/meta/anilist/info/",gogosearchapi="https://techzapi2.vercel.app/anime/gogoanime/";async function getJson(e){try{let t=await axios.get(e);return t.data}catch(l){console.error(l)}}function getGenreHtml(e){let t="";for(let l=0;l<e.length;l++)t+=`<a>${e[l]}</a>`;return t}async function RefreshLazyLoader(){let e=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let t=e.target;t.src=t.dataset.src}})}),t=document.querySelectorAll("img.lzy_img");t.forEach(t=>{e.observe(t)})}function getAnilistTitle(e){return null!=e.userPreferred?e.userPreferred:null!=e.english?e.english:null!=e.romaji?e.romaji:null!=e.native?e.native:"Unknown"}function getAnilistOtherTitle(e,t){return null!=e.userPreferred&&e.userPreferred!=t?e.userPreferred:null!=e.english&&e.english!=t?e.english:null!=e.romaji&&e.romaji!=t?e.romaji:null!=e.native&&e.native!=t?e.native:"Unknown"}async function getAnimeInfo(e){try{let t=await getJson(infoapi+e);document.documentElement.innerHTML=document.documentElement.innerHTML.replaceAll("TITLE",t.title).replaceAll("IMG",t.image).replaceAll("LANG",t.subOrDub.toUpperCase()).replaceAll("TYPE",t.type).replaceAll("URL",window.location).replaceAll("SYNOPSIS",t.description).replaceAll("OTHER",t.otherName).replaceAll("TOTAL",t.totalEpisodes).replaceAll("YEAR",t.releaseDate).replaceAll("STATUS",t.status).replaceAll("GENERES",getGenreHtml(t.genres)),document.getElementById("main-content").style.display="block",document.getElementById("load").style.display="none";let l=t.title;getEpList(e).then(e=>{console.log("Episode list loaded"),getRecommendations(l).then(e=>{RefreshLazyLoader(),console.log("Anime Recommendations loaded")})})}catch(a){await getSearchGogoAnimeInfo(e)}}async function getSearchGogoAnimeInfo(e){try{let t=await getJson("https://techzapi2.vercel.app/anime/gogoanime/"+e),l=t.results[0].id;t=await getJson(infoapi+l),document.documentElement.innerHTML=document.documentElement.innerHTML.replaceAll("TITLE",t.title).replaceAll("IMG",t.image).replaceAll("LANG",t.subOrDub.toUpperCase()).replaceAll("TYPE",t.type).replaceAll("URL",window.location).replaceAll("SYNOPSIS",t.description).replaceAll("OTHER",t.otherName).replaceAll("TOTAL",t.totalEpisodes).replaceAll("YEAR",t.releaseDate).replaceAll("STATUS",t.status).replaceAll("GENERES",getGenreHtml(t.genres)),document.getElementById("main-content").style.display="block",document.getElementById("load").style.display="none",getEpList(l).then(t=>{console.log("Episode list loaded"),getRecommendations(e).then(e=>{RefreshLazyLoader(),console.log("Anime Recommendations loaded")})})}catch(a){await getAnilistAnimeInfo(e)}}async function getAnilistAnimeInfo(e){try{let t=await getJson(searchapi+e),l=t.results[0].id;t=await getJson(anilistinfoapi+l);let a=getAnilistTitle(t.title);document.documentElement.innerHTML=document.documentElement.innerHTML.replaceAll("TITLE",a).replaceAll("IMG",t.image).replaceAll("LANG",t.subOrDub.toUpperCase()).replaceAll("TYPE",t.type).replaceAll("URL",window.location).replaceAll("SYNOPSIS",t.description).replaceAll("OTHER",getAnilistOtherTitle(t.title,a)).replaceAll("TOTAL",t.totalEpisodes).replaceAll("YEAR",t.releaseDate).replaceAll("STATUS",t.status).replaceAll("GENERES",getGenreHtml(t.genres)),document.getElementById("main-content").style.display="block",document.getElementById("load").style.display="none";let n=t.recommendations,s="";for(i=0;i<n.length;i++){let r=n[i],o=r.title.userPreferred;s+=`<a href="./anime.html?anime=${o}"><div class="poster la-anime"> <div id="shadow1" class="shadow"> <div class="dubb">${r.rating}</div><div class="dubb dubb2">${r.type}</div></div><div id="shadow2" class="shadow"> <img class="lzy_img" src="./logo/loading2.gif" data-src="${r.image}"> </div><div class="la-details"> <h3>${o}</h3> <div id="extra"> <span>${r.status}</span> <span class="dot"></span> <span>${r.episodes}</span> </div></div></div></a>`}document.getElementById("latest2").innerHTML=s,document.getElementById("ephtmldiv").innerHTML='<a class="ep-btn">Anime Name Not Found On GogoAnime, Try Searching With A Different Name...</a>'}catch(c){console.log(c)}}async function getEpList(e){let t=await getJson("https://api.techzbots1.workers.dev/gogo/episodes/"+e),l=Number(t.total),a="";for(let n=0;n<l;n++)a+=`<a class="ep-btn" href="./episode.html?anime=${e}&episode=${n+1}">${n+1}</a>`;document.getElementById("ephtmldiv").innerHTML=a}async function getRecommendations(e){let t=await getJson(searchapi+e),l=t.results[0].id;t=await getJson(anilistinfoapi+l);let a=t.recommendations,n="";for(i=0;i<a.length;i++){let s=a[i],r=s.title.userPreferred;n+=`<a href="./anime.html?anime=${r}"><div class="poster la-anime"> <div id="shadow1" class="shadow"> <div class="dubb">${s.rating}</div><div class="dubb dubb2">${s.type}</div></div><div id="shadow2" class="shadow"> <img class="lzy_img" src="./logo/loading2.gif" data-src="${s.image}"> </div><div class="la-details"> <h3>${r}</h3> <div id="extra"> <span>${s.status}</span> <span class="dot"></span> <span>${s.episodes}</span> </div></div></div></a>`}document.getElementById("latest2").innerHTML=n}const queryString=window.location.search,urlParams=new URLSearchParams(queryString);null==urlParams.get("anime")&&(window.location="./index.html"),getAnimeInfo(urlParams.get("anime")).then(e=>{RefreshLazyLoader(),console.log("Anime Info loaded")});